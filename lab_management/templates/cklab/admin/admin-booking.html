{% extends "cklab/base.html" %}
{% block title %}‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á{% endblock %}
{% block content %}
<div class="container-fluid p-4">
	<div class="d-flex justify-content-between align-items-center mb-4">
		<div>
			<h3 class="fw-bold text-primary mb-1">üìÖ Booking Management</h3>
			<p class="text-muted small mb-0">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
		</div>
	</div>

	<div class="row g-4">
		<div class="col-12 col-xl-4">
			<div class="card border-0 shadow-sm">
				<div class="card-header bg-primary text-white fw-bold">
					‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
				</div>
				<div class="card-body">
					<form method="post">
						{% csrf_token %}

						{% if form.non_field_errors %}
							<div class="alert alert-danger py-2" role="alert">
								{% for error in form.non_field_errors %}
									<div>{{ error }}</div>
								{% endfor %}
							</div>
						{% endif %}

						<div class="mb-3">
							<label class="form-label fw-bold text-muted small" for="id_student_id">‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á (‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤)</label>
							{{ form.student_id }}
							{% if form.student_id.errors %}
								<div class="text-danger small mt-1">{{ form.student_id.errors|join:", " }}</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label class="form-label fw-bold text-muted small" for="id_computer">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (PC)</label>
							{{ form.computer }}
							{% if form.computer.errors %}
								<div class="text-danger small mt-1">{{ form.computer.errors|join:", " }}</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label class="form-label fw-bold text-muted small" for="id_start_time">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
							{{ form.start_time }}
							{% if form.start_time.errors %}
								<div class="text-danger small mt-1">{{ form.start_time.errors|join:", " }}</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label class="form-label fw-bold text-muted small" for="id_end_time">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</label>
							{{ form.end_time }}
							{% if form.end_time.errors %}
								<div class="text-danger small mt-1">{{ form.end_time.errors|join:", " }}</div>
							{% endif %}
						</div>

						<div class="mb-4">
							<label class="form-label fw-bold text-muted small" for="id_status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
							{{ form.status }}
							{% if form.status.errors %}
								<div class="text-danger small mt-1">{{ form.status.errors|join:", " }}</div>
							{% endif %}
						</div>

						<button type="submit" class="btn btn-primary w-100 fw-bold">
							‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
						</button>
					</form>
				</div>
			</div>
		</div>

		<div class="col-12 col-xl-8">
			<div class="card border-0 shadow-sm">
				<div class="card-header bg-light fw-bold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
				<div class="card-body p-0">
					<div class="table-responsive">
						<table class="table table-hover align-middle mb-0">
							<thead>
								<tr>
									<th class="ps-3">‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</th>
									<th>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</th>
									<th>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</th>
									<th>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</th>
									<th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
								</tr>
							</thead>
							<tbody>
								{% for booking in bookings %}
									<tr>
										<td class="ps-3">{{ booking.student_id }}</td>
										<td>{{ booking.computer.name|default:"-" }}</td>
										<td>{{ booking.start_time|date:"d/m/Y H:i" }}</td>
										<td>{{ booking.end_time|date:"d/m/Y H:i" }}</td>
										<td>
											{% if booking.status == "APPROVED" %}
												<span class="badge bg-success">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</span>
											{% elif booking.status == "PENDING" %}
												<span class="badge bg-warning text-dark">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span>
											{% else %}
												<span class="badge bg-danger">‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span>
											{% endif %}
										</td>
									</tr>
								{% empty %}
									<tr>
										<td colspan="5" class="text-center text-muted py-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
